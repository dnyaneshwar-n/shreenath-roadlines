"use strict";(self.webpackChunksrl_web=self.webpackChunksrl_web||[]).push([[907],{6907:(C,m,i)=>{i.r(m),i.d(m,{PayslipDashboardModule:()=>r});var u=i(6895),d=i(9299),t=i(4650),_=i(4691),Z=i(8423),p=i(4006);function f(l,e){if(1&l&&(t.TgZ(0,"option",10),t._uU(1),t.qZA()),2&l){const n=e.$implicit;t.Q6J("value",n),t.xp6(1),t.Oqu(n)}}function A(l,e){if(1&l){const n=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"currency"),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.ALo(8,"currency"),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"currency"),t.qZA(),t.TgZ(12,"td")(13,"button",6),t.NdJ("click",function(){const h=t.CHM(n).$implicit,g=t.oxw(2);return t.KtG(g.viewPayslip(h))}),t._uU(14,"View"),t.qZA()()()}if(2&l){const n=e.$implicit;t.xp6(2),t.Oqu(null==n.driverId?null:n.driverId.fullname),t.xp6(2),t.Oqu(t.gM2(5,4,n.totalEarnings,"INR","symbol-narrow","4.2-2")),t.xp6(3),t.Oqu(t.gM2(8,9,n.totalDeductions,"INR","symbol-narrow","4.2-2")),t.xp6(3),t.Oqu(t.gM2(11,14,n.netPay,"INR","symbol-narrow","4.2-2"))}}function b(l,e){if(1&l&&(t.TgZ(0,"div",11)(1,"div",2)(2,"h3"),t._uU(3),t.qZA(),t.TgZ(4,"table",12)(5,"thead")(6,"tr")(7,"th"),t._uU(8,"Driver Name"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Total Earnings"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Total Deductions"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Net Pay"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Action"),t.qZA()()(),t.TgZ(17,"tbody"),t.YNc(18,A,15,19,"tr",13),t.qZA()()()()),2&l){const n=t.oxw();t.xp6(3),t.hij("Payslips for ",n.selectedMonthYear,""),t.xp6(15),t.Q6J("ngForOf",n.payslips)}}function T(l,e){if(1&l){const n=t.EpF();t.TgZ(0,"div",14)(1,"button",15),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.startPayslipGeneration())}),t._uU(2,"Start Generating Slips"),t.qZA()()}}function P(l,e){if(1&l&&(t.TgZ(0,"div",16)(1,"p"),t._uU(2),t.qZA()()),2&l){const n=t.oxw();t.xp6(2),t.hij("No payslips found for ",n.selectedMonthYear,"")}}class c{constructor(e,n,a){this.http=e,this.router=n,this.spinner=a,this.selectedMonthYear="",this.payslips=[],this.showGenerateButton=!1,this.monthYears=[],this.populateMonthYears()}getPayslips(e){this.selectedMonthYear=e,this.spinner.show(),this.http.get("api/payslips?monthYear="+e).subscribe(n=>{console.log(n),this.spinner.hide(),n.length>0?this.payslips=n:(this.payslips=[],this.showGenerateButton=!0)})}startPayslipGeneration(){this.spinner.show(),this.http.post("api/payslips/generate",{monthYear:this.selectedMonthYear}).subscribe(()=>{this.spinner.hide(),this.showGenerateButton=!1,this.getPayslips(this.selectedMonthYear)},e=>{console.log(e),this.spinner.hide()})}populateMonthYears(){const n=(new Date).getFullYear()+1;for(let a=2023;a<=n;a++)for(let o=1;o<=12;o++)this.monthYears.push(`${a}-${o<10?`0${o}`:`${o}`}`)}getMonthName(e){return["January","February","March","April","May","June","July","August","September","October","November","December"][e-1]}viewPayslip(e){this.router.navigate(["/dashboard/payslips/view",e._id])}}function q(l,e){if(1&l&&(t.TgZ(0,"tr")(1,"td"),t._uU(2,"Hamali"),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA()()),2&l){const n=t.oxw();t.xp6(4),t.Oqu(null==n.paySlip?null:n.paySlip.totalHamali)}}function S(l,e){if(1&l&&(t.TgZ(0,"tr")(1,"td"),t._uU(2,"Bhatta"),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA()()),2&l){const n=t.oxw();t.xp6(4),t.Oqu(null==n.paySlip?null:n.paySlip.totalBhatta)}}function U(l,e){if(1&l&&(t.TgZ(0,"tr")(1,"td"),t._uU(2,"Border"),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA()()),2&l){const n=t.oxw();t.xp6(4),t.Oqu(null==n.paySlip?null:n.paySlip.totalBorder)}}c.\u0275fac=function(e){return new(e||c)(t.Y36(_.O),t.Y36(d.F0),t.Y36(Z.t2))},c.\u0275cmp=t.Xpm({type:c,selectors:[["app-payslip-dashboard"]],decls:15,vars:5,consts:[[1,"container","mt-5"],[1,"row"],[1,"col"],[1,"form-group"],["placeholder","Month and Year",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["class","row mt-5",4,"ngIf","ngIfElse"],["class","row justify-content-center mt-5",4,"ngIf"],["noPayslips",""],[3,"value"],[1,"row","mt-5"],[1,"table"],[4,"ngFor","ngForOf"],[1,"row","justify-content-center","mt-5"],[1,"btn","btn-primary",3,"click"],[1,"row","justify-content-center"]],template:function(e,n){if(1&e&&(t._UZ(0,"router-outlet"),t.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"label"),t._uU(6,"Select Month and Year"),t.qZA(),t.TgZ(7,"select",4),t.NdJ("ngModelChange",function(o){return n.selectedMonthYear=o}),t.YNc(8,f,2,2,"option",5),t.qZA()(),t.TgZ(9,"button",6),t.NdJ("click",function(){return n.getPayslips(n.selectedMonthYear)}),t._uU(10,"Get Payslips"),t.qZA()()(),t.YNc(11,b,19,2,"div",7),t.YNc(12,T,3,0,"div",8),t.qZA(),t.YNc(13,P,3,1,"ng-template",null,9,t.W1O)),2&e){const a=t.MAs(14);t.xp6(7),t.Q6J("ngModel",n.selectedMonthYear),t.xp6(1),t.Q6J("ngForOf",n.monthYears),t.xp6(3),t.Q6J("ngIf",n.payslips.length>0)("ngIfElse",a),t.xp6(1),t.Q6J("ngIf",n.showGenerateButton)}},dependencies:[u.sg,u.O5,d.lC,p.YN,p.Kr,p.EJ,p.JJ,p.On,u.H9]});class y{constructor(e,n){this.route=e,this.http=n}ngOnInit(){this.route.params.subscribe(e=>{this.paySlipId=e.id,this.paySlipId&&this.getPayslip()})}getPayslip(){this.http.get("api/payslips/"+this.paySlipId).subscribe(e=>{this.paySlip=e.result})}}y.\u0275fac=function(e){return new(e||y)(t.Y36(d.gz),t.Y36(_.O))},y.\u0275cmp=t.Xpm({type:y,selectors:[["app-view-payslip"]],decls:78,vars:15,consts:[[1,"container","payslip-container"],[1,"payslip-header"],[1,"payslip-details"],[1,"payslip-table"],[4,"ngIf"],[1,"text-right","mt-3"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h2"),t._uU(3,"Payslip"),t.qZA()(),t.TgZ(4,"div",2)(5,"p")(6,"strong"),t._uU(7,"Employee Name:"),t.qZA(),t._uU(8),t.qZA(),t.TgZ(9,"p")(10,"strong"),t._uU(11,"Employee ID:"),t.qZA(),t._uU(12),t.qZA(),t.TgZ(13,"p")(14,"strong"),t._uU(15,"Month:"),t.qZA(),t._uU(16),t.qZA(),t.TgZ(17,"p")(18,"strong"),t._uU(19,"Account No:"),t.qZA(),t._uU(20),t.qZA(),t.TgZ(21,"p")(22,"strong"),t._uU(23,"IFSC:"),t.qZA(),t._uU(24),t.qZA()(),t.TgZ(25,"table",3)(26,"thead")(27,"tr")(28,"th"),t._uU(29,"Earnings"),t.qZA(),t.TgZ(30,"th"),t._uU(31,"Amount"),t.qZA()()(),t.TgZ(32,"tbody")(33,"tr")(34,"td"),t._uU(35,"Basic Salary"),t.qZA(),t.TgZ(36,"td"),t._uU(37),t.qZA()(),t.YNc(38,q,5,1,"tr",4),t.YNc(39,S,5,1,"tr",4),t.YNc(40,U,5,1,"tr",4),t.TgZ(41,"tr")(42,"td"),t._uU(43,"Pay Per Km"),t.qZA(),t.TgZ(44,"td"),t._uU(45),t.qZA()(),t.TgZ(46,"tr")(47,"td"),t._uU(48,"Pay per trip"),t.qZA(),t.TgZ(49,"td"),t._uU(50),t.qZA()()()(),t._UZ(51,"br"),t.TgZ(52,"table",3)(53,"thead")(54,"tr")(55,"th"),t._uU(56,"Deductions"),t.qZA(),t.TgZ(57,"th"),t._uU(58,"Amount"),t.qZA()()(),t.TgZ(59,"tbody")(60,"tr")(61,"td"),t._uU(62,"Advance"),t.qZA(),t.TgZ(63,"td"),t._uU(64),t.qZA()()()(),t.TgZ(65,"div",5)(66,"p")(67,"strong"),t._uU(68,"Total Earnings:"),t.qZA(),t._uU(69),t.qZA(),t.TgZ(70,"p")(71,"strong"),t._uU(72,"Total Deductions:"),t.qZA(),t._uU(73),t.qZA(),t.TgZ(74,"p")(75,"strong"),t._uU(76,"Net Pay:"),t.qZA(),t._uU(77),t.qZA()()()),2&e&&(t.xp6(8),t.hij(" ",null==n.paySlip||null==n.paySlip.driverId?null:n.paySlip.driverId.fullname,""),t.xp6(4),t.hij(" ",null==n.paySlip||null==n.paySlip.driverId?null:n.paySlip.driverId._id,""),t.xp6(4),t.hij(" ",null==n.paySlip?null:n.paySlip.monthYear,""),t.xp6(4),t.hij(" ",null==n.paySlip||null==n.paySlip.driverId?null:n.paySlip.driverId.accountNo,""),t.xp6(4),t.hij(" ",null==n.paySlip||null==n.paySlip.driverId?null:n.paySlip.driverId.ifsc,""),t.xp6(13),t.Oqu(null==n.paySlip?null:n.paySlip.basicSalary),t.xp6(1),t.Q6J("ngIf",null==n.paySlip?null:n.paySlip.totalHamali),t.xp6(1),t.Q6J("ngIf",null==n.paySlip?null:n.paySlip.totalBhatta),t.xp6(1),t.Q6J("ngIf",null==n.paySlip?null:n.paySlip.totalBorder),t.xp6(5),t.Oqu(null==n.paySlip?null:n.paySlip.totalPayPerKm),t.xp6(5),t.Oqu(null==n.paySlip?null:n.paySlip.totalPayPerTrip),t.xp6(14),t.Oqu(null==n.paySlip?null:n.paySlip.totalDeductions),t.xp6(5),t.hij(" ",null==n.paySlip?null:n.paySlip.totalEarnings,""),t.xp6(4),t.hij(" ",null==n.paySlip?null:n.paySlip.totalDeductions,""),t.xp6(4),t.hij(" ",null==n.paySlip?null:n.paySlip.netPay,""))},dependencies:[u.O5],styles:[".payslip-container[_ngcontent-%COMP%]{margin:50px auto;max-width:600px;padding:20px;border:1px solid #ccc;border-radius:5px}.payslip-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.payslip-details[_ngcontent-%COMP%]{margin-bottom:30px}.payslip-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0}.payslip-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.payslip-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .payslip-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ccc;padding:8px}.payslip-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2}"]});const v=[{path:"",component:c},{path:"view/:id",component:y}];class s{}s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[d.Bz.forChild(v),d.Bz]});var M=i(8530);class r{}r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[u.ez,s,M.j,p.u5]})}}]);