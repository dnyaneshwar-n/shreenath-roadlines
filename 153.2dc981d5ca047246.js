"use strict";(self.webpackChunksrl_web=self.webpackChunksrl_web||[]).push([[153],{153:(U,g,i)=>{i.r(g),i.d(g,{LedgerModule:()=>c});var h=i(6895),u=i(9299),y=i(5226),m=i.n(y),e=i(4650),f=i(4691),Z=i(8423),b=i(7185),A=i(8219);function T(o,t){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA()()),2&o){const r=t.$implicit;e.xp6(2),e.Oqu(r.date),e.xp6(2),e.Oqu(r.accountType),e.xp6(2),e.Oqu(r.description),e.xp6(2),e.Oqu(r.debit),e.xp6(2),e.Oqu(r.credit),e.xp6(2),e.Oqu(r.balance)}}class l{constructor(t,r,s,p){this.http=t,this.spinner=r,this.toast=s,this.excelService=p,this.ledgerEntries=[]}ngOnInit(){this.spinner.show(),this.http.get("api/ledger").subscribe(t=>{this.spinner.hide(),"success"===t.message&&(this.ledgerEntries=t.result)},t=>{this.spinner.hide(),this.toast.error("Something went wrong")})}exportToExcel(){this.excelService.exportAsExcelFile(this.ledgerEntries,"LedgerEntries")}deleteClient(t){m().fire({title:`Are you sure to delete distributor - ${t.fullname} ?`,text:"'You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Delete!"}).then(r=>{r.value&&this.http.delete("api/clients/"+t._id).subscribe(s=>{"success"===s.message&&(m().fire("Deleted!","Distributor has been deleted.","success"),this.ngOnInit())},s=>{this.toast.error("Something went wrong")})})}}l.\u0275fac=function(t){return new(t||l)(e.Y36(f.O),e.Y36(Z.t2),e.Y36(b._W),e.Y36(A.x))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-ledger"]],decls:22,vars:1,consts:[[1,"container"],["routerLink","/dashboard/ledger/add-entry",1,"btn","btn-primary","float-right"],[1,"table","table-striped"],[4,"ngFor","ngForOf"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"h2"),e._uU(2," Ledger Entries "),e.qZA(),e.TgZ(3,"button",1),e._uU(4,"Add New Entry"),e.qZA(),e.TgZ(5,"table",2)(6,"thead")(7,"tr")(8,"th"),e._uU(9,"Date"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Account Type"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Description"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Debit"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"Credit"),e.qZA(),e.TgZ(18,"th"),e._uU(19,"Balance"),e.qZA()()(),e.TgZ(20,"tbody"),e.YNc(21,T,13,6,"tr",3),e.qZA()()()),2&t&&(e.xp6(21),e.Q6J("ngForOf",r.ledgerEntries))},dependencies:[h.sg,u.rH]});var n=i(4006);class d{constructor(t,r,s,p,q){this.formBuilder=t,this.http=r,this.route=s,this.spinner=p,this.toast=q,this.isEditMode=!1}ngOnInit(){this.route.paramMap.subscribe(t=>{this.entryId=t.get("id"),this.entryId&&(this.isEditMode=!0,this.getEntry(this.entryId))}),this.initForm(),this.getDrivers(1)}getDrivers(t){this.spinner.show(),this.http.get("api/drivers?status="+t).subscribe(r=>{this.spinner.hide(),"success"===r.message&&(this.drivers=r.result)},r=>{this.spinner.hide(),this.toast.error("Something went wrong")})}initForm(){this.ledgerForm=this.formBuilder.group({driverid:[""],accountType:["",n.kI.required],date:["",n.kI.required],description:[""],debit:[""],credit:[""],balance:[""]})}getEntry(t){this.http.get("api/ledger/"+t).subscribe(r=>{this.ledgerForm.patchValue({accountType:r.accountType?.accountType,date:r.date?.date,description:r.description?.description,debit:r.debit?.debit,credit:r.credit?.credit,balance:r.balance?.balance})})}onSubmit(){if(this.ledgerForm.invalid)return;const t=this.ledgerForm.value;this.isEditMode?this.http.patch("api/ledger",t).subscribe(r=>{console.log("Entry updated successfully.")},r=>{console.error("Error updating entry:",r)}):this.http.post("api/ledger",t).subscribe(r=>{console.log("Entry added successfully.")},r=>{console.error("Error adding entry:",r)})}}d.\u0275fac=function(t){return new(t||d)(e.Y36(n.qu),e.Y36(f.O),e.Y36(u.gz),e.Y36(Z.t2),e.Y36(b._W))},d.\u0275cmp=e.Xpm({type:d,selectors:[["app-add-ledger-entry"]],decls:30,vars:1,consts:[[1,"container"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","accountType"],["type","text","formControlName","accountType","required","",1,"form-control"],["for","date"],["type","date","formControlName","date","required","",1,"form-control"],["for","description"],["formControlName","description",1,"form-control"],["for","debit"],["type","number","formControlName","debit",1,"form-control"],["for","credit"],["type","number","formControlName","credit",1,"form-control"],["for","balance"],["type","number","formControlName","balance",1,"form-control"],["type","submit",1,"btn","btn-primary"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"h2"),e._uU(2,"Add/Edit Ledger Entry"),e.qZA(),e.TgZ(3,"form",1),e.NdJ("ngSubmit",function(){return r.onSubmit()}),e.TgZ(4,"div",2)(5,"label",3),e._uU(6,"Account Type"),e.qZA(),e._UZ(7,"input",4),e.qZA(),e.TgZ(8,"div",2)(9,"label",5),e._uU(10,"Date"),e.qZA(),e._UZ(11,"input",6),e.qZA(),e.TgZ(12,"div",2)(13,"label",7),e._uU(14,"Description"),e.qZA(),e._UZ(15,"textarea",8),e.qZA(),e.TgZ(16,"div",2)(17,"label",9),e._uU(18,"Debit"),e.qZA(),e._UZ(19,"input",10),e.qZA(),e.TgZ(20,"div",2)(21,"label",11),e._uU(22,"Credit"),e.qZA(),e._UZ(23,"input",12),e.qZA(),e.TgZ(24,"div",2)(25,"label",13),e._uU(26,"Balance"),e.qZA(),e._UZ(27,"input",14),e.qZA(),e.TgZ(28,"button",15),e._uU(29,"Submit"),e.qZA()()()),2&t&&(e.xp6(3),e.Q6J("formGroup",r.ledgerForm))},dependencies:[n._Y,n.Fj,n.wV,n.JJ,n.JL,n.Q7,n.sg,n.u]});const v=[{path:"",component:l},{path:"add-entry",component:d},{path:"edit-entry/:id",component:d}];class a{}a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[u.Bz.forChild(v),u.Bz]});class c{}c.\u0275fac=function(t){return new(t||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({imports:[h.ez,a,n.u5,n.UX]})}}]);